<!doctype html>
<html lang="es">
	<head>
		<meta charset='utf-8'>
		<title>Juego de Carreras - Three.js</title>
		<style>
			body {
				background-color: #000;
				margin: 0px;
				overflow: hidden;
				font-family: Arial, sans-serif;
			}
			
			#container {
				position: relative;
				width: 100%;
				height: 100vh;
			}
			
			#ui {
				position: absolute;
				top: 16px;
				left: 16px;
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(5px);
				padding: 16px 18px 16px;
				border-radius: 14px;
				box-shadow: 0 4px 14px rgba(0,0,0,0.5), inset 0 0 10px rgba(0,0,0,0.05);
				width: 270px;
				font-size: 14px;
				color: #333;
			}
			#ui h3 { margin: 0 0 8px; font-size: 22px; letter-spacing: 1px; }
			#speedDisplay { font-size: 38px; line-height: 38px; font-weight: 800; font-family: 'Arial Black', Arial, sans-serif; letter-spacing: 2px; text-shadow: 0 0 8px #0066cc, 0 0 12px rgba(0,102,204,0.4); color: #0066cc; }
			#speedUnits { font-size: 13px; opacity: 0.9; margin-left: 6px; }
			.speed-wrapper { margin-top: 8px; }
			.speed-bar { width: 180px; height: 16px; background: linear-gradient(180deg,#f0f0f0,#e0e0e0); border: 1px solid #0066cc; border-radius: 6px; position: relative; overflow:hidden; box-shadow: 0 0 4px #0066cc inset, 0 0 8px rgba(0,0,0,0.18); }
			.speed-bar::after { content:""; position:absolute; inset:0; background: repeating-linear-gradient(135deg, rgba(255,255,255,0.07) 0 8px, rgba(255,255,255,0) 8px 16px); pointer-events:none; mix-blend-mode:overlay; }
			.speed-fill { height:100%; width:0%; background: linear-gradient(90deg, #15ff00, #a6ff00, #ffd000, #ff7a00, #ff2a00); box-shadow: 0 0 8px 2px rgba(255,170,0,0.4); transition: width 0.12s ease-out, filter 0.25s; filter: saturate(1.2); }
			.speed-scale { display:flex; justify-content:space-between; font-size:10px; font-family: monospace; margin-top:4px; letter-spacing:1px; opacity:0.8; width:180px; }
			.stat-line { font-size:13px; opacity:0.95; margin-top:8px; }
			.rev-indicator { display:inline-block; min-width:34px; text-align:center; padding:4px 6px; border-radius:7px; background:#333; margin-left:8px; font-size:12px; color:#fff; }
			#instructions {
				position: absolute;
				bottom: 18px;
				left: 18px;
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(5px);
				padding: 12px 16px 14px;
				border-radius: 12px;
				font-size: 13px;
				width: 180px;
				color: #333;
			}
			#instructions h4 { font-size: 15px; margin: 0 0 8px; }
			#instructions p { font-size: 13px; margin: 4px 0; line-height: 1.2; }
			
			/* Estilos para pop-ups */
			.popup {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.7);
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 2000;
			}
			
			.popup-content {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(5px);
				padding: 24px 32px;
				border-radius: 14px;
				box-shadow: 0 6px 18px rgba(0,0,0,0.5);
				text-align: center;
				color: #333;
				max-width: 340px;
				min-width: 260px;
			}
            
			.popup h2 {
				font-size: 26px;
				margin: 0 0 16px;
				color: #0066cc;
				font-weight: bold;
			}
            
			.popup p {
				font-size: 15px;
				margin: 10px 0;
				line-height: 1.3;
				font-weight: 500;
			}
            
			.popup button {
				background: linear-gradient(135deg, #0066cc, #0088ff);
				color: white;
				border: none;
				padding: 10px 22px;
				font-size: 15px;
				border-radius: 9px;
				cursor: pointer;
				margin: 8px;
				transition: all 0.3s ease;
				font-weight: bold;
			}
            
			.popup button:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 12px rgba(0,102,204,0.25);
			}
			
			.hidden {
				display: none;
			}
			
			#finalTime {
				font-size: 28px;
				font-weight: bold;
				color: #ff6600;
				margin: 16px 0;
				text-shadow: 0 2px 6px rgba(255,102,0,0.3);
			}
			/* fin estilos */
		</style>
	</head>
	<body>
		<!-- Pop-up de inicio -->
		<div id="startPopup" class="popup">
			<div class="popup-content">
				<h2>üèéÔ∏è Juego de Carreras</h2>
				<p>¬°Bienvenido al circuito de velocidad!</p>
				<p><strong>Objetivo:</strong> Completa una vuelta completa lo m√°s r√°pido posible</p>
				<button onclick="startRace()">üöÄ Iniciar Carrera</button>
			</div>
		</div>
		
		<!-- Pop-up de finalizaci√≥n -->
		<div id="finishPopup" class="popup hidden">
			<div class="popup-content">
				<h2>üèÅ ¬°Carrera Completada!</h2>
				<p>üéâ ¬°Excelente trabajo! üéâ</p>
				<p><strong>Tu tiempo oficial:</strong></p>
				<div id="finalTime">0:00.00</div>
				<p>¬°Has completado una vuelta completa al circuito!</p>
				<button onclick="restartRace()">üîÑ Nueva Carrera</button>
			</div>
		</div>
		
		<!-- Contenedor del app -->
		<div id="container">
			<div id="ui">
				<h3>üèÅ Juego de Carreras</h3>
				<div style="display:flex; align-items:flex-end; gap:10px;">
					<div id="speedDisplay">0</div>
					<div id="speedUnits">km/h</div>
				</div>
				<div class="speed-wrapper">
					<div class="speed-bar"><div class="speed-fill" id="speedBar"></div></div>
					<div class="speed-scale">
						<span>0</span><span>40</span><span>80</span><span>120</span><span>160</span><span>200</span><span>220</span>
					</div>
				</div>
				<div class="stat-line">Estado: <span id="gearLabel">N</span></div>
			</div>
			
			<div id="instructions">
				<h4>üìã Controles:</h4>
				<p><strong>W / ‚Üë</strong> - Acelerar</p>
				<p><strong>S / ‚Üì</strong> - Frenar/Retroceder</p>
				<p><strong>A / ‚Üê</strong> - Girar izquierda</p>
				<p><strong>D / ‚Üí</strong> - Girar derecha</p>
			</div>
		</div>

		<!-- Scripts de biblioteca -->
		<script src="lib/three.min_r140.js"></script>
		<script src="lib/OrbitControls.js"></script>
		<script src="lib/GLTFLoader.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.140.0/examples/js/utils/BufferGeometryUtils.js"></script>
		<script src="lib/stats.min.js"></script>
		<script src="js/proyecto.js"></script>

	</body>
</html>